import{r,a as e,j as t,c as C}from"./app-fd46c604.js";import{L as I}from"./LayoutAdmin-8736fa77.js";import"./iconBase-f10177b7.js";const M=({auth:m,title:o,gallery:l,category:u,paging:g})=>{if(!l)return null;const[h,p]=r.useState(null),[c,f]=r.useState(l.title),[d,x]=r.useState(l.category_gallery_id),[n,b]=r.useState(""),[i,N]=r.useState(""),v=()=>n?t("div",{className:"bg-green-500 text-white rounded-md p-2 flex w-[40%] gap-4 items-center",children:[e("p",{children:n}),e("button",{className:"bg-green-custom py-1 px-3 hover:bg-gray-400 rounded-lg",onClick:()=>{window.location.href=route("content",{page:g})},children:"Back"})]}):e("div",{className:"bg-red-500 text-white rounded-md p-2",children:e("p",{children:i})}),w=a=>{p(a.target.files[0])},y=async a=>{a.preventDefault();try{const s=new FormData;s.append("title",c),s.append("category_gallery_id",d),s.append("image",h);const S=await C.post(`/admin/content/update/${l.id}`,s,{headers:{"Content-Type":"multipart/form-data"}});b(S.data.message)}catch(s){console.log(s),console.log("Gagal update data !!",s.message),s&&N("Gagal update data !! "+s.message)}};return e(I,{title:o,auth:m,children:t("div",{className:"p-10 w-full h-auto",children:[e("h1",{className:"text-2xl font-semibold",children:o+" "+l.title}),t("div",{className:"my-10 flex flex-col",children:[t("div",{className:"w-full flex flex-col",children:[e("img",{className:"w-[40%]",src:`/assets/img/gallery/${l.image}`,alt:""}),e("p",{className:"w-[40%] text-center",children:l.image})]}),n||i?e("div",{className:"w-full flex flex-col mt-3",children:v()}):null]}),t("form",{onSubmit:y,className:"flex flex-col gap-3",action:"",children:[t("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"",children:"Title Image :"}),e("input",{type:"text",className:"border-2 border-gray-400 rounded-md p-2",value:c,onChange:a=>f(a.target.value)})]}),t("div",{className:"flex w-full flex-col",children:[t("label",{htmlFor:"",children:["Ganti Foto: ",l.image,":"]}),e("input",{type:"file",className:"border-2 border-gray-400 rounded-md p-2",onChange:w})]}),t("div",{className:"flex w-full flex-col",children:[t("label",{htmlFor:"",children:["Kategori = (",l.category.category_name,")"]}),e("select",{onChange:a=>x(a.target.value),className:"border-2 border-gray-400 rounded-md p-2",value:d,children:u.map(a=>e("option",{value:a.id,children:a.category_name},a.id))})]}),e("div",{className:"flex w-full flex-col",children:e("button",{className:"bg-blue-500 text-white rounded-md p-2 hover:bg-blue-200",type:"submit",children:"Update"})})]})]})})};export{M as default};
