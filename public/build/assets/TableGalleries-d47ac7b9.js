import{r,j as l,a as e,d,R as Y,c}from"./app-fd46c604.js";import{h as A}from"./moment-fbc5633a.js";const B=({galleries:m})=>{const[o,C]=r.useState(m),h=o.links[0].url,u=o.links[o.links.length-1].url,s=o.current_page,D=o.last_page,[g,M]=r.useState(""),[b,T]=r.useState(null),G=(t,a)=>{t.preventDefault(),window.my_modal_1.showModal(),T(a)},p=t=>A(t).format("DD-MMMM-YYYY HH:mm"),[x,f]=r.useState(""),[F,w]=r.useState(""),[N,y]=r.useState(""),[v,k]=r.useState(""),[_,I]=r.useState(""),P=t=>{w(t.target.files[0])},$=t=>{t.preventDefault(),c.get(`/admin/content/search?query=${g}`).then(a=>{const n=a.data;C(n.galleries)}).catch(a=>{console.error(a)})},q=t=>{t.preventDefault();const a=new FormData;a.append("title",x),a.append("image",F),a.append("category_gallery_id",N),c.post("/admin/content/store",a,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{f(""),w(""),y(""),window.my_modal_3.close(),k(n.data.message)}).catch(n=>{console.error(n),I("Gagal Menambahkan Foto ",n)})},z=()=>{const t=[],a=D,n=3;let S=Math.max(1,s-n),j=Math.min(a,s+n);S>1&&t.push("...");for(let i=S;i<=j;i++)t.push(i);return j<a&&t.push("..."),t},L=t=>{window.confirm("Apakah Anda yakin ingin menghapus data ini?")&&c.delete(`/admin/content/delete/${t}`).then(n=>{console.log(n.data),k(n.data.message)}).catch(n=>{})};return l("div",{className:"w-full h-auto overflow-y-auto mb-20",children:[l("div",{className:"bg-white text-xl font-bold lg:text-4xl md:text-3xl w-full sticky z-30 top-0",children:[e("h1",{children:"Table Galleri"}),e("button",{className:"text-xl bg-green-custom text-white px-5 py-2 rounded-md mb-3 hover:bg-gray-400",onClick:()=>window.my_modal_3.showModal(),children:"Tambah Galleri"}),l("form",{onSubmit:$,className:"mb-4",children:[e("input",{type:"text",placeholder:"Cari Bedasarkan Title / Category",value:g,onChange:t=>M(t.target.value),className:"border border-gray-300 rounded px-4 py-2 focus:outline-none w-[40%]"}),e("button",{type:"submit",className:"bg-gray-300 text-xl text-gray-700 rounded px-4 py-2 ml-2 hover:bg-gray-400 focus:outline-none",children:"Search"})]}),v&&l("div",{className:"alert alert-success w-[50%] mb-3",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e("span",{className:"text-xl",children:v}),e("button",{className:"text-xl text-blue-600 font-medium  border-b-2 border-blue-600",onClick:()=>window.location.reload(),children:"Muat Ulang Halaman"})]}),_&&l("div",{className:"alert alert-error",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e("span",{children:_})]})]}),l("table",{className:"table",children:[e("thead",{className:"sticky top-[9rem] z-20",children:l("tr",{className:"bg-green-custom text-center",children:[e("th",{className:"text-xl font-extrabold text-white border",children:"No"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Title"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Foto"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Kategori"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Tanggal penambahan"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Terakhir di Update"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Action"})]})}),e("tbody",{className:"",children:o.data.map((t,a)=>l("tr",{className:"text-center",children:[e("th",{className:"border",children:(s-1)*m.per_page+a+1}),e("td",{className:"border",children:t.title}),e("td",{className:"md:w-[20%] w-[80%] h-auto border cursor-pointer",onClick:n=>G(n,t.image),children:e("img",{className:"md:w-full w-full ",src:`/assets/img/gallery/${t.image}`,alt:""})}),e("td",{className:"border",children:t.category.category_name}),e("td",{className:"border",children:p(t.created_at)}),e("td",{className:"border",children:p(t.updated_at)}),e("td",{className:"border",children:l("div",{className:"flex gap-3 justify-center",children:[e(d,{href:`/admin/content/edit/${t.id}/`+s,className:"p-3 bg-yellow-400 hover:bg-yellow-200",children:"Edit"}),e("button",{className:"p-3 bg-red-400 hover:bg-red-200",onClick:()=>L(t.id),children:"Delete"})]})})]},a))})]}),l("div",{className:"Join w-full flex justify-center sticky bottom-0 bg-white py-5 shadow-xl",children:[h?e(d,{href:h,className:"join-item btn rounded-none ",children:"«"}):e("button",{disabled:!0,className:"join-item btn rounded-none",children:"«"}),z().map((t,a)=>e(Y.Fragment,{children:t==="..."?e("span",{className:"join-item btn rounded-none",children:"..."}):e(d,{href:t===1?"/admin/content":`/admin/content?page=${t}`,className:`join-item btn  rounded-none ${s===t?"btn-active bg-green-custom":""}`,children:t})},a)),u?e(d,{href:u,className:"join-item btn rounded-none",children:"»"}):e("button",{disabled:!0,className:"join-item btn rounded-none",children:"»"})]}),e("dialog",{id:"my_modal_3",className:"modal justify-center ",children:l("div",{className:"w-auto ",children:[e("div",{className:"w-full bg-white flex justify-end",children:e("button",{className:"btn rounded-none btn-sm hover:none bg-white border-none right-2 top-2",onClick:()=>window.my_modal_3.close(),children:"✕"})}),l("form",{onSubmit:q,method:"dialog",className:"modal-box bg-white rounded-none flex flex-col gap-6 p-5 w-full md:w-[40rem]",children:[l("div",{className:"form-control w-full ",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:"Judul Gambar"})}),e("input",{required:!0,id:"title",name:"title",type:"text",placeholder:"Type here",className:"input input-bordered w-full ",value:x,onChange:t=>f(t.target.value)})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"image",children:"Upload Foto"}),e("input",{required:!0,id:"image",name:"image",type:"file",className:"file-input w-full border border-gray-300",onChange:P})]}),e("div",{className:"flex flex-col",children:l("select",{required:!0,name:"category_gallery_id",className:"select select-bordered w-full ",value:N,onChange:t=>y(t.target.value),children:[e("option",{value:"",children:"Pilih Kategori"}),e("option",{value:"1",children:"Exterior"}),e("option",{value:"2",children:"Interior"}),e("option",{value:"3",children:"Potongan"}),e("option",{value:"4",children:"Denah"})]})}),e("button",{type:"submit",className:"btn btn-primary",children:"Simpan"})]})]})}),e("dialog",{id:"my_modal_1",className:"modal w-full",children:l("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl rounded-none",children:[e("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"}),e("div",{className:"w-full",children:b&&e("img",{className:"w-full h-full",src:`/assets/img/gallery/${b}`,alt:""})})]})})]})},R=B;export{R as default};
