import{r as n,j as l,a as e,c as P}from"./app-fd46c604.js";import{h as M}from"./moment-fbc5633a.js";import U from"./FormEdit-87e0bfd3.js";const I=({pemesananUnit:S})=>{const[r,C]=n.useState([]),[j,D]=n.useState([]),c=a=>M(a).format("DD-MMMM-YYYY HH:mm"),[h,u]=n.useState(""),[b,p]=n.useState(""),[g,x]=n.useState(""),[w,N]=n.useState(""),[i,f]=n.useState(""),[v,_]=n.useState(""),[y,k]=n.useState(""),[m,s]=n.useState(null),E=(a,t)=>{a.preventDefault(),C(t),window.my_modal_4.show()},A=[{id:1,name:"A1"},{id:2,name:"A2"},{id:3,name:"A3"},{id:4,name:"A4"},{id:5,name:"A5"},{id:6,name:"A6"},{id:7,name:"A7"},{id:8,name:"A8"},{id:9,name:"A9"},{id:10,name:"A10"},{id:11,name:"A11"},{id:12,name:"A12"}];n.useEffect(()=>{m&&(localStorage.setItem("message",m),window.location.reload())},[m]),n.useEffect(()=>{const a=localStorage.getItem("message");a&&(alert(a),localStorage.removeItem("message"))},[]);const T=n.useRef(null),o=(a,t)=>a.replace(t,""),F=a=>{console.log("No WA :",i),a.preventDefault();const t=new FormData;t.append("no_unit",h),t.append("sistem_pengajuan",b),t.append("nama_lengkap",g),t.append("email",w),t.append("no_wa",i),t.append("alamat",v),t.append("pesan",y),P.post("/admin/tambah_pesanan",t).then(d=>{u(""),p(""),x(""),N(""),f(""),_(""),k(""),window.my_modal_3.close(),s(d.data.message),window.location.reload()}).catch(d=>{s("Terjadi kesalahan, silahkan coba lagi nanti"),scrollToTop()})},q=(a,t)=>{a.preventDefault(),P.post(`/admin/delete_pesanan/${t}`).then(d=>{s(d.data.message),window.location.reload()}).catch(d=>{s("Terjadi kesalahan, silahkan coba lagi nanti"),scrollToTop()})};return l("div",{className:"w-full h-auto mb-20",children:[e(U,{data:j,dataUnitKavling:A}),l("div",{className:"bg-white text-xl font-bold lg:text-4xl md:text-3xl w-full sticky z-30 top-0",children:[e("h1",{children:"Table Pemesanan Unit"}),e("button",{className:"text-xl bg-green-custom text-white px-5 py-2 rounded-md mb-3 hover:bg-gray-400",onClick:()=>window.my_modal_3.showModal(),children:"Tambah Pesanan"})]}),e("div",{className:"w-[75rem] overflow-x-auto py-3",children:l("table",{className:"table w-full",children:[e("thead",{className:"",children:l("tr",{className:"bg-green-custom text-center",children:[e("th",{className:"text-xl font-extrabold text-white border",children:"No"}),e("th",{className:"text-xl font-extrabold text-white border",children:"ID Pemesanan"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Nama Lengkap"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Alamat Email"}),e("th",{className:"text-xl font-extrabold text-white border",children:"No Wa"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Tanggal penambahan"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Terakhir di Update"}),e("th",{className:"text-xl font-extrabold text-white border",children:"Action"})]})}),e("tbody",{className:"",children:S.map((a,t)=>l("tr",{className:"text-center",children:[e("th",{className:"border",children:t+1}),e("td",{className:"border",children:a.id+"_"+a.no_unit}),e("td",{className:"border",children:a.nama_lengkap}),e("td",{className:"border",children:a.email}),e("td",{className:"border",children:a.no_wa}),e("td",{className:"border",children:c(a.created_at)}),e("td",{className:"border",children:c(a.updated_at)}),l("td",{className:"flex gap-2",children:[e("button",{className:"bg-blue-300 text-white py-1 px-2 rounded-md hover:bg-blue-200",onClick:d=>E(d,a),children:"Detail"}),e("button",{onClick:()=>{D(a),window.my_modal_2.show()},className:"btn btn-warning rounded-md hover:bg-yellow-300 text-white",children:"Edit"}),e("button",{className:"btn bg-red-500 rounded-md hover:bg-red-300 text-white",onClick:d=>{q(d,a.id)},children:"Delete"})]})]},t))})]})}),r&&e("dialog",{id:"my_modal_4",className:"modal",children:l("form",{method:"dialog",className:"modal-box w-6/12 max-w-5xl",children:[l("h1",{className:"font-bold text-xl ",children:["Detail Pesanan"," ",r.id+"_"+r.no_unit]}),l("p",{className:"border-b border-gray-400 w-[50%]",children:["Id Pesanan : ",r.id]}),l("p",{className:"border-b border-gray-400 w-[50%]",children:["Unit yang dipesan : ",r.no_unit]}),l("p",{className:"border-b border-gray-400 w-[50%]",children:["Sistem Pengajuan : ",r.sistem_pengajuan]}),l("p",{className:"border-b border-gray-400 w-[50%]",children:["Nama Lengkap : ",r.nama_lengkap]}),l("p",{className:"border-b border-gray-400 w-[50%]",children:["Email : ",r.email]}),l("p",{className:"border-b border-gray-400 w-[50%]",children:["No WhatsApp : ",r.no_wa]}),l("div",{className:"flex flex-col w-full",children:[e("label",{htmlFor:"alamat",children:"Alamat :"}),e("textarea",{className:"w-[50%] h-auto",value:r.alamat,disabled:!0,id:"alamat",autoComplete:"on"})]}),e("div",{className:"modal-action",children:e("button",{className:"btn",children:"Close"})})]})}),e("dialog",{id:"my_modal_3",className:"modal",children:l("div",{className:"w-full rounded-none h-full bg-white flex flex-col justify-center items-center modal-box",children:[e("div",{className:"w-full flex justify-end",children:e("button",{className:"btn btn-sm btn-circle btn-ghost  right-2 top-2",onClick:()=>window.my_modal_3.close(),children:"âœ•"})}),l("form",{className:" flex flex-col gap-4 w-full",onSubmit:F,ref:T,method:"dialog",children:[l("div",{className:"flex flex-wrap",children:[e("label",{htmlFor:"unit_kavling",className:"mb-2 w-full",children:"Unit/Kavling"}),l("select",{required:!0,name:"unit_kavling",id:"unit_kavling",className:"border border-gray-300 rounded-md px-2 py-1 lg:w-[50%] md:w-[100%] w-full lg:mr-3",value:h,autoComplete:"on",onChange:a=>{u(a.target.value)},children:[e("option",{value:"",children:"Pilih Unit/Kavling"}),A.map((a,t)=>e("option",{value:a.name,children:a.name},t))]})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"sistem_pengajuan",children:"Sistem Pengajuan :"}),l("select",{required:!0,name:"sistem_pengajuan",id:"sistem_pengajuan",className:"border border-gray-300 rounded-md px-2 py-1 lg:w-[50%] md:w-[100%] w-full lg:mr-3",value:b,autoComplete:"on",onChange:a=>{p(a.target.value)},children:[e("option",{value:"",children:"Pilih Sistem Pengajuan"}),e("option",{value:"kpr",children:"KPR"}),e("option",{value:"cash",children:"Cash"}),e("option",{value:"cash bertahap",children:"Cash Bertahap"})]})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"nama_lengkap",children:"Nama Lengkap:"}),e("input",{required:!0,type:"text",name:"nama_lengkap",id:"nama_lengkap",className:"border border-gray-300 rounded-md px-2 py-1",value:g,onChange:a=>{x(o(a.target.value,/[^a-zA-Z0-9\s]/g))}})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"email",children:"Email:"}),e("input",{required:!0,type:"email",name:"email",id:"email",className:"border border-gray-300 rounded-md px-2 py-1",value:w,onChange:a=>{N(o(a.target.value,/[^a-zA-Z0-9_.+\-@]/g))}})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"no_wa",children:"No. WhatsApp:"}),e("input",{required:!0,type:"text",name:"no_wa",id:"no_wa",className:"border border-gray-300 rounded-md px-2 py-1",value:i,onChange:a=>{f(o(a.target.value,/[^0-9+-]/g))}})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"alamat",children:"Alamat:"}),e("textarea",{required:!0,name:"alamat",id:"alamat",rows:"4",className:"border border-gray-300 rounded-md px-2 py-1",value:v,onChange:a=>{_(o(a.target.value,/[^a-zA-Z0-9\s\-\/\.\,\(\)\#\&\"\'\:\;\@\!\_\+]/g))}})]}),l("div",{className:"flex flex-col",children:[e("label",{htmlFor:"pesan",children:"Pesan (Opsional):"}),e("textarea",{required:!0,name:"pesan",id:"pesan",rows:"4",className:"border border-gray-300 rounded-md px-2 py-1",value:y,onChange:a=>{k(o(a.target.value,/[^a-zA-Z0-9\s\-\/\.\,\(\)\#\&\"\'\:\;\@\!\_\+]/g))}})]}),e("button",{type:"submit",className:"bg-green-custom text-white px-4 py-2 rounded-md",children:"Submit"})]})]})})]})};export{I as default};
